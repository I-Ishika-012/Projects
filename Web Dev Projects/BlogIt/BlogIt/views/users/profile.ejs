<html lang="en"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Fontawesome -->
    <script src="https://kit.fontawesome.com/42a182743f.js" crossorigin="anonymous"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/profile.css">
    <link rel="stylesheet" href="/css/style.css">
    <title>Profile</title>
  </head>
  <body>
    <!--navbar-->
    <%-include('../partials/navbar.ejs') %>

    <div class="profile-container">
      <header style="
          background-image: url('<%=user?.coverImage%>');
        ">
        <div class="icons-container">
          <!-- <p>
            <i class="fas fa-user"></i>
            <a><img class="user" src="/icons/user-blog.png"></a>
          </p> -->
          <!-- <p>
            <i class="fas fa-envelope"></i>
            <img class="mail" src="/icons/envelope.png">
          </p> -->
          <!-- <p>
            <i class="fas fa-lock"></i>
            <img class="lock" src="/icons/lock.png">
          </p> -->
          <!-- <p>
            <i class="fas fa-sign-out-alt"></i>
            <img class="logout" src="/icons/logout.png">
          </p> -->
          <p>
            <!-- upload cover image icon -->
        <!-- <i class="fas fa-camera upload-btn"></i> -->
        <a href="/api/v1/users/upload-cover-photo">
        <img class="cover-img" src="/icons/camera.png"></a>
          </p>
          <p>
            <a href="/api/v1/users/update-user/<%=user?._id%>">
            <img class="edit" src="/icons/edit.png"></a>
          </p>
            <p>
            <a href="/api/v1/users/update-user/update-user-password">
            <img class="edit" src="/icons/key.png"></a>
          </p>
        </div>
        
      </header>

      <!-- profile image -->
      <div class="profile-img">
        <img id="profile-image" src="<%=user?.profileImage%>" alt="profile-image">
        <!-- upload profile image icon -->
        <!-- <i class="fas fa-camera upload-btn"></i> -->
        <p>
            <a href="/api/v1/users/upload-profile-photo">
        <img id="profile-icon" src="/icons/camera.png"></a>
        </p>
      </div>
      <!-- personal details -->
      <div class="personal-container">
        <div class="details-wrapper">
          <div class="details">
            <!-- <i class="fas fa-user"></i> -->
            <img class="user" src="/icons/user-blog.png">
            <p>Name: <%=user?.fullname%></p>
          </div>
          <div class="details">
            <!-- <i class="fas fa-envelope"></i> -->
            <img class="mail" src="/icons/envelope.png">
            <p>Email: <%=user?.email%></p>
          </div>
          <!-- date joined -->
          <div class="details">
            <!-- <i class="fas fa-calendar"></i> -->
            <img class="lock" src="/icons/calendar.png">
            <p>Date Joined: <%=user?.createdAt.toLocalDateString()%></p>
          </div>
        </div>
      </div>
    </div>
    <div class="latest-post-title">
      <!-- Icon -->
      <!-- <i class="fas fa-book-open"></i> -->
      <img class="book" src="/icons/open-book.png">
      <h1>Latest Posts (20)</h1>
      
    </div>

    <!-- content -->
    <section class="container-flex">

      //?if there are no posts
      <% if(user?.posts?.length <= 0) { %> 
      <h1>No Posts</h1>
      <%}else{%>
        <% user?.posts.forEach((post) => { %>
          <article class="post-content">
          
            <img src="<%=post?.image%>" alt="" class="post-image">
            <p class="post-info">
              <span class="post-author">
                <!-- <i class="fas fa-user"></i> -->
                <img class="user" src="/icons/user-blog.png">
                <a href="#"><%=post?.user?.fullname %></a>
              </span>
              <span class="post-date">
                <!-- <i class="far fa-calendar-alt"></i> -->
                <img class="date" src="/icons/calendar.png">
                <time datetime="2020-01-01"><%= post?.createdAt %>></time>
              </span>
            </p><h1 class="post-title"><%=post?.title %>></h1>
            <p class="post-body">
              <%= truncatePost(post?.description) %>>
            </p>
            <!-- category -->
            <div class="post-category">
              <span>Category:<% = post?.category %></span>
            </div>
            <a href="/" class="post-read-more">Continue Reading...</a>
          </article>
        <%})%>
      <%}%> 
    </section>
    <p>
        <!-- <i style="color: yellow" class="fa-solid fa-key fas"></i> -->
      </p>
    <!-- footer -->
    <!--footer-->
  <%-include('../partials/footer') %>
  



</body></html>
